<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8" />
<title>Create User Example</title>
</head>

<body>

</body>

<script type="text/javascript">

class createUserForm extends HTMLElement
{
   constructor()
   {
      super();

      this.usernameInput = document.createElement('input');
      this.usernameInput.type = 'text';
      this.usernameInput.value = '';
      this.usernameInput.placeholder = 'username';

      this.passwordInput = document.createElement('input');
      this.passwordInput.type = 'password';
      this.passwordInput.value = '';
      this.passwordInput.placeholder = 'password';

      this.nameInput = document.createElement('input');
      this.nameInput.type = 'text';
      this.nameInput.value = '';
      this.nameInput.placeholder = 'name';

      this.surnameInput = document.createElement('input');
      this.surnameInput.type = 'surname';
      this.surnameInput.value = '';
      this.surnameInput.placeholder = 'surname';

      this.dniInput = document.createElement('input');
      this.dniInput.type = 'dni';
      this.dniInput.value = '';
      this.dniInput.placeholder = 'dni';

      this.telephoneInput = document.createElement('input');
      this.telephoneInput.type = 'telephone';
      this.telephoneInput.value = '';
      this.telephoneInput.placeholder = 'telephone';

      this.genderInput = document.createElement('input');
      this.genderInput.type = 'gender';
      this.genderInput.value = '';
      this.genderInput.placeholder = 'gender';

      this.addressInput = document.createElement('input');
      this.addressInput.type = 'address';
      this.addressInput.value = '';
      this.addressInput.placeholder = 'address';

      this.mailInput = document.createElement('input');
      this.mailInput.type = 'mail';
      this.mailInput.value = '';
      this.mailInput.placeholder = 'mail';

      this.roleInput = document.createElement('input');
      this.roleInput.type = 'role';
      this.roleInput.value = '';
      this.roleInput.placeholder = 'role';

      this.submitButton = document.createElement('button');
      this.submitButton.innerText = 'createUser';
      
      this.appendChild(this.usernameInput);
      this.appendChild(this.passwordInput);
      this.appendChild(this.dniInput);
      this.appendChild(this.telephoneInput);
      this.appendChild(this.genderInput);
      this.appendChild(this.addressInput);
      this.appendChild(this.mailInput);
      this.appendChild(this.roleInput);
      this.appendChild(this.submitButton);
   }

   connectedCallback()
   {
      this.submitButton.onclick = (e) => this.oncreatebuttonclick(e);
   }

   async oncreatebuttonclick(event)
   {
      let formDataObject = 
      {
         username: this.usernameInput.value,
         password: this.passwordInput.value,
         dni: this.dniInput,
         telephone: this.telephoneInput,
         gender: this.genderInput,
         address : this.addressInput,
         mail : this.mailInput,
         role: this.roleInput
      };

      // let response = await fetch('http://localhost/isft151/2023/mgsantiago/seminario-de-actualizacion/integration/createUser.php',
      //    { 
      //       method:'POST', 
      //       body: JSON.stringify(formDataObject)
      //    });

      // response.json().then( (r)=>
      // {
      //    console.log(r);
      // });
   }

   
}

customElements.define('x-form', createUserForm );

window.onload = () =>
{
   let form = new createUserForm();
   document.body.appendChild(form);
}

</script>

</html>
